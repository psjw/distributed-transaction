# 요구사항 정의

주문기능을 만들려고 하며 다음과 같은 역할을 하여야 한다.

```text
- 주문데이터를 저장하여야 한다.
- 재고관리를 하여야한다.
- 포인트를 사용해야한다.
- 주문, 재고, 포인트 데이터의 정합성이 맞아야한다.
- 동일한 주문은 1번만 이루어져야한다.
```


# MSA로의 전환

## Monolithic Architecture

모든 기능이 하나의 애플리케이션에 포함된 구조입니다.
- 서비스 전체가 단일 애플리케이션으로 묶여 있어 결합도가 높습니다.
  - 하나의 코드페이스로 운영되며, 빌드/배포도 한번에 수행합니다.
  - 다양한 도메인(예: 주문, 결제, 회원 등)이 하나의 서비스 안에 섞여 있습니다.
  - 특정 기능의 성능을 높이려면 전체 애플리케이션을 함께 확장해야 합니다.
- 장점 : 구조가 단순하여 빠른 개발 및 테스트 가능, 트랜잭션 관리 용이
- 단점 : 서비스가 커질수록 유지보수와 화장이 어려워집니다.

---

## MSA(Microservices Architecture)

기능을 여러 개의 작고 독립적인 서비스로 나누어 운영하는 아키텍처입니다.
- 각 서비스는 도메인 단위로 분리되어 독립적으로 운영합니다. 
  - 예 : 주문, 포인트, 재고등
- 개별적으로 빌드/배포 되며, 서로 다른 기술 스택도 사용할 수 있습니다.
- 성능 확장이 필요한 부분만 선택적으로 확장이 가능합니다.
- 장점 : 도메인별 소유권 부여 등 유연성 극대화
- 단점 : 초기 인프라 구성, 트랜잭션 관리, 모니터링 등 운영 복잡도 증가


## MSA로 전환하면서 생기는 문제점

- 서비스간 데이터정합성을 보장하기 까다로워 짐

## 분산트랜잭션을 보장하기 위한 방법들

1. 2PC
2. TCC
3. SAGA